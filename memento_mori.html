<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memento Mori</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #fafafa;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            flex: 1;
        }

        .step {
            display: none;
            animation: fadeIn 0.6s ease-in-out;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Step 1: Birth Date Input */
        .intro-step {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
            padding-top: 10vh;
        }

        .intro-step h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 300;
            margin-bottom: 1.5rem;
            color: #1a1a1a;
        }

        .intro-step p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 3rem;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .date-input-container {
            margin-bottom: 3rem;
        }

        .date-input-container label {
            display: block;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .date-input-container input {
            width: 100%;
            max-width: 200px;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1.1rem;
            text-align: center;
            background: white;
            transition: border-color 0.2s ease;
        }

        .date-input-container input:focus {
            outline: none;
            border-color: #666;
        }

        .continue-btn {
            background: #333;
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-family: inherit;
        }

        .continue-btn:hover {
            background: #555;
        }

        .continue-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Step 2: Visualization */
        .visualization-step {
            padding-top: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: clamp(1.5rem, 4vw, 2rem);
            font-weight: 300;
            margin-bottom: 0.5rem;
            color: #1a1a1a;
        }

        .header p {
            color: #666;
            font-size: 0.9rem;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .stat {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .stat-number {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 200;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .grid-container {
            background: white;
            border-radius: 12px;
            padding: clamp(1rem, 3vw, 2rem);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .grid-legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            font-size: 0.85rem;
            color: #666;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-square {
            width: 8px;
            height: 8px;
            border-radius: 1px;
        }

        .legend-square.lived {
            background: #333;
        }

        .legend-square.remaining {
            background: #e5e5e5;
            border: 1px solid #ddd;
        }

        .weeks-grid {
            display: grid;
            grid-template-columns: repeat(52, 1fr);
            gap: clamp(1px, 0.5vw, 2px);
            max-width: 100%;
            margin: 0 auto;
        }

        .week-square {
            aspect-ratio: 1;
            background: #e5e5e5;
            border-radius: 1px;
            transition: all 0.2s ease;
            border: 1px solid #f0f0f0;
        }

        .week-square.lived {
            background: #333;
            border-color: #333;
        }

        .week-square:hover {
            transform: scale(1.2);
            z-index: 10;
            position: relative;
        }

        .back-btn {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: color 0.2s ease;
            z-index: 100;
        }

        .back-btn:hover {
            color: #333;
        }

        .reflection-text {
            text-align: center;
            max-width: 600px;
            margin: 2rem auto 0;
            padding: 2rem;
            color: #666;
            font-size: 0.95rem;
            line-height: 1.8;
            font-style: italic;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .weeks-grid {
                grid-template-columns: repeat(26, 1fr);
            }

            .stats-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .grid-legend {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .back-btn {
                top: 1rem;
                left: 1rem;
            }
        }

        @media (max-width: 480px) {
            .weeks-grid {
                grid-template-columns: repeat(20, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Step 1: Birth Date Input -->
        <div class="step intro-step active" id="step1">
            <h1>Memento Mori</h1>
            <p>Each life is a collection of weeks. Let's visualize yours and see the story they tell.</p>
            <p style="font-size: 0.9rem; color: #999; margin-top: 1rem; font-style: italic;">"You could die today. Let this determine what you do and say and think." — Marcus Aurelius</p>
            
            <div class="date-input-container">
                <label for="birthDate">Your birth date</label>
                <input type="date" id="birthDate" />
            </div>
            
            <button class="continue-btn" id="continueBtn" disabled>Continue</button>
        </div>

        <!-- Step 2: Visualization -->
        <div class="step visualization-step" id="step2">
            <button class="back-btn" id="backBtn">←</button>
            
            <div class="header">
                <h1>Your life in weeks</h1>
                <p>Each square represents one week of your life, assuming 90 years lifespan</p>
            </div>

            <div class="stats-container" id="statsContainer">
                <!-- Stats will be populated by JavaScript -->
            </div>

            <div class="grid-container">
                <div class="grid-legend">
                    <div class="legend-item">
                        <div class="legend-square lived"></div>
                        <span>Weeks lived</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-square remaining"></div>
                        <span>Weeks remaining</span>
                    </div>
                </div>
                
                <div class="weeks-grid" id="weeksGrid">
                    <!-- Grid will be populated by JavaScript -->
                </div>
            </div>

            <div class="reflection-text">
                Time is the most precious resource we have. Each filled square represents a week that has shaped who you are today. The empty squares remind us that every week ahead is an opportunity to create something meaningful.
            </div>
        </div>
    </div>

    <script>
        // Elements
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const birthDateInput = document.getElementById('birthDate');
        const continueBtn = document.getElementById('continueBtn');
        const backBtn = document.getElementById('backBtn');
        const statsContainer = document.getElementById('statsContainer');
        const weeksGrid = document.getElementById('weeksGrid');

        // Enable continue button when date is selected
        birthDateInput.addEventListener('change', function() {
            continueBtn.disabled = !this.value;
        });

        // Continue to visualization
        continueBtn.addEventListener('click', function() {
            if (birthDateInput.value) {
                generateVisualization();
                showStep(2);
            }
        });

        // Back to input
        backBtn.addEventListener('click', function() {
            showStep(1);
        });

        function showStep(stepNumber) {
            document.querySelectorAll('.step').forEach(step => step.classList.remove('active'));
            document.getElementById(`step${stepNumber}`).classList.add('active');
        }

        function generateVisualization() {
            const birthDate = new Date(birthDateInput.value);
            const today = new Date();
            
            // Calculate weeks lived
            const msPerWeek = 7 * 24 * 60 * 60 * 1000;
            const weeksLived = Math.floor((today - birthDate) / msPerWeek);
            
            // Assume 90 years lifespan (4680 weeks)
            const totalWeeks = 90 * 52;
            const weeksRemaining = Math.max(0, totalWeeks - weeksLived);
            const lifePercentage = Math.min(100, (weeksLived / totalWeeks * 100));
            
            // Calculate additional stats
            const yearsLived = (weeksLived / 52).toFixed(1);
            const daysLived = weeksLived * 7;
            
            // Generate stats
            generateStats({
                weeksLived,
                weeksRemaining,
                lifePercentage,
                yearsLived,
                daysLived
            });
            
            // Generate grid
            generateGrid(weeksLived, totalWeeks);
        }

        function generateStats(data) {
            const stats = [
                { number: data.weeksLived.toLocaleString(), label: 'Weeks lived' },
                { number: data.weeksRemaining.toLocaleString(), label: 'Weeks remaining' },
                { number: `${data.lifePercentage.toFixed(1)}%`, label: 'Life lived' },
                { number: data.yearsLived, label: 'Years on earth' }
            ];

            statsContainer.innerHTML = stats.map(stat => `
                <div class="stat">
                    <div class="stat-number">${stat.number}</div>
                    <div class="stat-label">${stat.label}</div>
                </div>
            `).join('');
        }

        function generateGrid(weeksLived, totalWeeks) {
            weeksGrid.innerHTML = '';
            
            for (let i = 0; i < totalWeeks; i++) {
                const square = document.createElement('div');
                square.className = 'week-square';
                if (i < weeksLived) {
                    square.classList.add('lived');
                }
                weeksGrid.appendChild(square);
            }
        }

        // Set max date to today and configure for Norwegian locale
        const today = new Date().toISOString().split('T')[0];
        birthDateInput.max = today;
        
        // Set locale for Norwegian date formatting
        birthDateInput.addEventListener('focus', function() {
            this.setAttribute('data-placeholder', 'dd.mm.yyyy');
        });
    </script>
</body>
</html>